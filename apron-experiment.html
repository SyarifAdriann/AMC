<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apron Stand Positioning Tool - 1920x1080</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #3F72AF 0%, #112D4E 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1960px;
            margin: 0 auto;
            background: rgba(249, 247, 247, 0.98);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
            color: #112D4E;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .info {
            text-align: center;
            color: #555;
            margin-bottom: 15px;
            font-size: 13px;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .controls button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #3F72AF, #112D4E);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: transform 0.2s;
        }

        .controls button:hover {
            transform: translateY(-2px);
        }

        .controls button.danger {
            background: #dc3545;
        }

        #apron-wrapper {
            width: 1920px;
            height: 1080px;
            margin: 0 auto;
            position: relative;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 3px solid #112D4E;
            background: #f0f0f0;
        }

        #apron-container {
            width: 1920px;
            height: 1080px;
            position: relative;
            background-image: url('APRON.png');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
        }

        #grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 1920px;
            height: 1080px;
            pointer-events: none;
            z-index: 5;
            opacity: 0.3;
        }

        #grid-overlay.hidden {
            display: none;
        }

        .ruler-horizontal, .ruler-vertical {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            pointer-events: none;
            z-index: 4;
            font-size: 9px;
            color: #333;
        }

        .ruler-horizontal {
            top: 0;
            left: 0;
            width: 1920px;
            height: 20px;
            border-bottom: 2px solid #333;
        }

        .ruler-vertical {
            top: 0;
            left: 0;
            width: 20px;
            height: 1080px;
            border-right: 2px solid #333;
        }

        .stand {
            position: absolute;
            background: linear-gradient(135deg, rgba(63, 114, 175, 0.9), rgba(17, 45, 78, 0.9));
            border: 2px solid #112D4E;
            border-radius: 4px;
            padding: 3px 5px;
            font-weight: 700;
            cursor: move;
            user-select: none;
            font-size: 10px;
            text-align: center;
            line-height: 1.2;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .stand:hover {
            background: linear-gradient(135deg, rgba(219, 226, 239, 0.9), rgba(63, 114, 175, 0.9));
            border-color: #3F72AF;
            color: #112D4E;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .stand.dragging {
            opacity: 0.7;
            z-index: 1000;
        }

        #output {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        #output.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #output-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
        }

        #output-content h2 {
            margin-bottom: 15px;
            color: #112D4E;
        }

        #output-content pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 500px;
        }

        #output-content button {
            margin-top: 15px;
            padding: 10px 20px;
            background: #3F72AF;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-right: 10px;
        }

        .coords-display {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 12px;
            font-family: monospace;
            z-index: 1500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ´ Apron Stand Positioning Tool (1920x1080)</h1>
        <div class="info">Drag stands to position them. Canvas is exactly 1920x1080px.</div>

        <div class="controls">
            <button onclick="exportCoordinates()">üìã Export Coordinates</button>
            <button onclick="resetPositions()" class="danger">üîÑ Reset to Original</button>
            <button onclick="toggleGrid()">üìê Toggle Grid</button>
        </div>

        <div id="apron-wrapper">
            <div id="apron-container">
                <div class="ruler-horizontal" id="ruler-h"></div>
                <div class="ruler-vertical" id="ruler-v"></div>
                <canvas id="grid-overlay" width="1920" height="1080"></canvas>
            </div>
        </div>
    </div>

    <div id="coords-display" class="coords-display" style="display: none;"></div>

    <div id="output">
        <div id="output-content">
            <h2>Stand Coordinates</h2>
            <p>Copy this code and paste it into your script:</p>
            <pre id="output-code"></pre>
            <button onclick="copyToClipboard()">Copy to Clipboard</button>
            <button onclick="closeOutput()">Close</button>
        </div>
    </div>

    <script>
        // Initial stand positions
        const initialStands = {
            // MAIN APRON - A and B series
            'A0': [1875, 903], 'A1': [1818, 903], 'A2': [1761, 903], 'A3': [1704, 903],
            'B1': [1647, 903], 'B2': [1590, 903], 'B3': [1533, 903], 'B4': [1476, 903],
            'B5': [1419, 903], 'B6': [1362, 903], 'B7': [1305, 903], 'B8': [1248, 903],
            'B9': [1191, 903], 'B10': [1134, 903], 'B11': [1077, 903], 'B12': [1020, 903],
            'B13': [963, 903],

            // REMOTE WEST
            'RW01': [1760, 773], 'RW02': [1715, 773], 'RW03': [1670, 773], 'RW04': [1625, 773],
            'RW05': [1580, 773], 'RW06': [1535, 773], 'RW07': [1490, 773], 'RW08': [1445, 773],
            'RW09': [1400, 773], 'RW10': [1355, 773], 'RW11': [1310, 773],

            // REMOTE EAST
            'RE01': [1205, 773], 'RE02': [1162, 773], 'RE03': [1119, 773], 'RE04': [1076, 773],
            'RE05': [1033, 773], 'RE06': [990, 773], 'RE07': [947, 773],

            // SOUTH APRON
            'SA01': [83, 93], 'SA02': [186, 93], 'SA03': [289, 93], 'SA04': [392, 93],
            'SA05': [495, 93], 'SA06': [598, 93], 'SA07': [67, 134], 'SA08': [99, 134],
            'SA09': [170, 134], 'SA10': [202, 134], 'SA11': [273, 134], 'SA12': [305, 134],
            'SA13': [376, 134], 'SA14': [408, 134], 'SA15': [479, 134], 'SA16': [511, 134],
            'SA17': [582, 134], 'SA18': [614, 134], 'SA19': [67, 176], 'SA20': [99, 176],
            'SA21': [170, 176], 'SA22': [202, 176], 'SA23': [273, 176], 'SA24': [305, 176],
            'SA25': [376, 176], 'SA26': [408, 176], 'SA27': [479, 176], 'SA28': [511, 176],
            'SA29': [582, 176], 'SA30': [614, 176],

            // NEW SOUTH APRON
            'NSA01': [875, 160], 'NSA02': [905, 160], 'NSA03': [935, 160], 'NSA04': [965, 160],
            'NSA05': [995, 160], 'NSA06': [1025, 160], 'NSA07': [1055, 160], 'NSA08': [1085, 190],
            'NSA09': [1085, 240], 'NSA10': [905, 240], 'NSA11': [935, 240], 'NSA12': [965, 240],
            'NSA13': [995, 240], 'NSA14': [1025, 240], 'NSA15': [1055, 240],

            // WEST REMOTE
            'WR01': [917, 843], 'WR02': [917, 869], 'WR03': [917, 895]
        };

        const container = document.getElementById('apron-container');
        const coordsDisplay = document.getElementById('coords-display');
        const gridCanvas = document.getElementById('grid-overlay');
        const gridCtx = gridCanvas.getContext('2d');
        const stands = JSON.parse(JSON.stringify(initialStands)); // Deep copy
        let draggedElement = null;
        let offsetX = 0;
        let offsetY = 0;
        let showGrid = true;

        // Draw grid and rulers
        function drawGrid() {
            const smallGrid = 10;  // Small grid every 10px
            const largeGrid = 50;  // Bold grid every 50px

            // Clear canvas
            gridCtx.clearRect(0, 0, 1920, 1080);

            if (!showGrid) return;

            // Draw small grid lines (10px)
            gridCtx.strokeStyle = 'rgba(0, 0, 0, 0.1)';
            gridCtx.lineWidth = 0.5;
            for (let x = 0; x <= 1920; x += smallGrid) {
                gridCtx.beginPath();
                gridCtx.moveTo(x, 0);
                gridCtx.lineTo(x, 1080);
                gridCtx.stroke();
            }
            for (let y = 0; y <= 1080; y += smallGrid) {
                gridCtx.beginPath();
                gridCtx.moveTo(0, y);
                gridCtx.lineTo(1920, y);
                gridCtx.stroke();
            }

            // Draw thicker lines every 50px
            gridCtx.strokeStyle = 'rgba(0, 0, 0, 0.25)';
            gridCtx.lineWidth = 1.5;
            for (let x = 0; x <= 1920; x += largeGrid) {
                gridCtx.beginPath();
                gridCtx.moveTo(x, 0);
                gridCtx.lineTo(x, 1080);
                gridCtx.stroke();
            }
            for (let y = 0; y <= 1080; y += largeGrid) {
                gridCtx.beginPath();
                gridCtx.moveTo(0, y);
                gridCtx.lineTo(1920, y);
                gridCtx.stroke();
            }

            // Draw even thicker lines every 100px
            gridCtx.strokeStyle = 'rgba(0, 0, 0, 0.4)';
            gridCtx.lineWidth = 2;
            for (let x = 0; x <= 1920; x += 100) {
                gridCtx.beginPath();
                gridCtx.moveTo(x, 0);
                gridCtx.lineTo(x, 1080);
                gridCtx.stroke();
            }
            for (let y = 0; y <= 1080; y += 100) {
                gridCtx.beginPath();
                gridCtx.moveTo(0, y);
                gridCtx.lineTo(1920, y);
                gridCtx.stroke();
            }
        }

        // Draw rulers
        function drawRulers() {
            const rulerH = document.getElementById('ruler-h');
            const rulerV = document.getElementById('ruler-v');

            // Horizontal ruler
            rulerH.innerHTML = '';
            for (let x = 0; x <= 1920; x += 100) {
                const mark = document.createElement('span');
                mark.style.position = 'absolute';
                mark.style.left = `${x}px`;
                mark.style.top = '2px';
                mark.style.fontSize = '9px';
                mark.style.fontWeight = 'bold';
                mark.textContent = x;
                rulerH.appendChild(mark);
            }

            // Vertical ruler
            rulerV.innerHTML = '';
            for (let y = 0; y <= 1080; y += 100) {
                const mark = document.createElement('span');
                mark.style.position = 'absolute';
                mark.style.top = `${y}px`;
                mark.style.left = '2px';
                mark.style.fontSize = '9px';
                mark.style.fontWeight = 'bold';
                mark.style.writingMode = 'vertical-rl';
                mark.textContent = y;
                rulerV.appendChild(mark);
            }
        }

        // Initialize grid and rulers
        drawGrid();
        drawRulers();

        // Create stand elements
        Object.entries(stands).forEach(([code, [x, y]]) => {
            const standDiv = document.createElement('div');
            standDiv.className = 'stand';
            standDiv.textContent = code;
            standDiv.style.left = `${x}px`;
            standDiv.style.top = `${y}px`;
            standDiv.dataset.stand = code;

            standDiv.addEventListener('mousedown', startDrag);
            container.appendChild(standDiv);
        });

        function startDrag(e) {
            draggedElement = e.target;
            const rect = draggedElement.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();

            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            draggedElement.classList.add('dragging');
            coordsDisplay.style.display = 'block';

            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
            e.preventDefault();
        }

        function drag(e) {
            if (!draggedElement) return;

            const containerRect = container.getBoundingClientRect();
            let x = e.clientX - containerRect.left - offsetX;
            let y = e.clientY - containerRect.top - offsetY;

            // Constrain to container
            x = Math.max(0, Math.min(1920 - draggedElement.offsetWidth, x));
            y = Math.max(0, Math.min(1080 - draggedElement.offsetHeight, y));

            draggedElement.style.left = `${x}px`;
            draggedElement.style.top = `${y}px`;

            // Update coordinates display
            coordsDisplay.textContent = `${draggedElement.dataset.stand}: [${Math.round(x)}, ${Math.round(y)}]`;
        }

        function stopDrag(e) {
            if (!draggedElement) return;

            const x = parseInt(draggedElement.style.left);
            const y = parseInt(draggedElement.style.top);
            const standCode = draggedElement.dataset.stand;

            stands[standCode] = [x, y];

            draggedElement.classList.remove('dragging');
            draggedElement = null;

            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);

            setTimeout(() => {
                coordsDisplay.style.display = 'none';
            }, 2000);
        }

        function exportCoordinates() {
            let output = "const stands = {\n";

            // Group by category
            const categories = {
                'Main Apron A': ['A0', 'A1', 'A2', 'A3'],
                'Main Apron B': ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B9', 'B10', 'B11', 'B12', 'B13'],
                'Remote West': ['RW01', 'RW02', 'RW03', 'RW04', 'RW05', 'RW06', 'RW07', 'RW08', 'RW09', 'RW10', 'RW11'],
                'Remote East': ['RE01', 'RE02', 'RE03', 'RE04', 'RE05', 'RE06', 'RE07'],
                'South Apron': ['SA01', 'SA02', 'SA03', 'SA04', 'SA05', 'SA06', 'SA07', 'SA08', 'SA09', 'SA10', 'SA11', 'SA12', 'SA13', 'SA14', 'SA15', 'SA16', 'SA17', 'SA18', 'SA19', 'SA20', 'SA21', 'SA22', 'SA23', 'SA24', 'SA25', 'SA26', 'SA27', 'SA28', 'SA29', 'SA30'],
                'New South Apron': ['NSA01', 'NSA02', 'NSA03', 'NSA04', 'NSA05', 'NSA06', 'NSA07', 'NSA08', 'NSA09', 'NSA10', 'NSA11', 'NSA12', 'NSA13', 'NSA14', 'NSA15'],
                'West Remote': ['WR01', 'WR02', 'WR03']
            };

            Object.entries(categories).forEach(([category, codes]) => {
                output += `    // ${category.toUpperCase()}\n`;
                codes.forEach((code, idx) => {
                    if (stands[code]) {
                        const [x, y] = stands[code];
                        output += `    '${code}': [${x}, ${y}]`;
                        if (idx < codes.length - 1 || category !== 'West Remote') {
                            output += ',';
                        }
                        output += '\n';
                    }
                });
                if (category !== 'West Remote') output += '\n';
            });

            output += "};";

            document.getElementById('output-code').textContent = output;
            document.getElementById('output').classList.add('show');
        }

        function copyToClipboard() {
            const text = document.getElementById('output-code').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('Coordinates copied to clipboard!');
            });
        }

        function closeOutput() {
            document.getElementById('output').classList.remove('show');
        }

        function resetPositions() {
            if (confirm('Reset all stands to original positions?')) {
                Object.entries(initialStands).forEach(([code, [x, y]]) => {
                    stands[code] = [x, y];
                    const standDiv = container.querySelector(`[data-stand="${code}"]`);
                    if (standDiv) {
                        standDiv.style.left = `${x}px`;
                        standDiv.style.top = `${y}px`;
                    }
                });
            }
        }

        function toggleGrid() {
            showGrid = !showGrid;
            drawGrid();

            const rulerH = document.getElementById('ruler-h');
            const rulerV = document.getElementById('ruler-v');

            if (showGrid) {
                rulerH.style.display = 'block';
                rulerV.style.display = 'block';
            } else {
                rulerH.style.display = 'none';
                rulerV.style.display = 'none';
            }
        }
    </script>
</body>
</html>
